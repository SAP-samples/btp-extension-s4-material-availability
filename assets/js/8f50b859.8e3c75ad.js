"use strict";(self.webpackChunkbtp_extension_s4_material_availability=self.webpackChunkbtp_extension_s4_material_availability||[]).push([[533],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(a),d=i,h=u["".concat(l,".").concat(d)]||u[d]||m[d]||o;return a?n.createElement(h,r(r({ref:t},c),{},{components:a})):n.createElement(h,r({ref:t},c))}));function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,r=new Array(o);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,r[1]=s;for(var p=2;p<o;p++)r[p]=a[p];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},7039:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var n=a(7462),i=(a(7294),a(3905));const o={sidebar_position:9},r="Update Material Availability Service to Consume Live Data from SAP S/4HANA",s={unversionedId:"project-panel/advanced/consume-live-data/README",id:"project-panel/advanced/consume-live-data/README",title:"Update Material Availability Service to Consume Live Data from SAP S/4HANA",description:"In this section, you will use the SAP S/4HANA system you configured in the previous step to consume live data from the Material Availability service. First, you will configure the connectivity from your SAP BTP subaccount which is subscribed to SAP Business Application Studio to the SAP S/4HANA system. Then you will consume this destination from the Material Availability service.",source:"@site/docs/project-panel/4-advanced/2-consume-live-data/README.md",sourceDirName:"project-panel/4-advanced/2-consume-live-data",slug:"/project-panel/advanced/consume-live-data/",permalink:"/btp-extension-s4-material-availability/project-panel/advanced/consume-live-data/",draft:!1,tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Integrate with SAP S/4HANA",permalink:"/btp-extension-s4-material-availability/project-panel/advanced/setup-s4hana-system/"},next:{title:"Deploy The Material Availability Service to SAP BTP, Cloud Foundry",permalink:"/btp-extension-s4-material-availability/project-panel/advanced/deploy/"}},l={},p=[{value:"Enable connection to SAP S/4HANA from SAP BTP and SAP Business Application Studio",id:"enable-connection-to-sap-s4hana-from-sap-btp-and-sap-business-application-studio",level:2},{value:"Configure the Material Availability service to consume external services through destination",id:"configure-the-material-availability-service-to-consume-external-services-through-destination",level:2},{value:"Test from SAP Business Application Studio",id:"test-from-sap-business-application-studio",level:2}],c={toc:p},u="wrapper";function m(e){let{components:t,...a}=e;return(0,i.kt)(u,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"update-material-availability-service-to-consume-live-data-from-sap-s4hana"},"Update Material Availability Service to Consume Live Data from SAP S/4HANA"),(0,i.kt)("p",null,"In this section, you will use the SAP S/4HANA system you configured in the previous step to consume live data from the Material Availability service. First, you will configure the connectivity from your SAP BTP subaccount which is subscribed to SAP Business Application Studio to the SAP S/4HANA system. Then you will consume this destination from the Material Availability service."),(0,i.kt)("h2",{id:"enable-connection-to-sap-s4hana-from-sap-btp-and-sap-business-application-studio"},"Enable connection to SAP S/4HANA from SAP BTP and SAP Business Application Studio"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Access the SAP BTP cockpit of your subaccount which is subscribed to SAP Business Application Studio.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Navigate to the ",(0,i.kt)("strong",{parentName:"p"},"Connectivity")," > ",(0,i.kt)("strong",{parentName:"p"},"Destinations")," section.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create a new destination with the following properties:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Name: Provide a unique name for the destination. For example, you can use the SAP S/4HANA system name."),(0,i.kt)("li",{parentName:"ul"},"Type: HTTP"),(0,i.kt)("li",{parentName:"ul"},"URL: The endpoint URL for your system, with the following pattern: ",(0,i.kt)("inlineCode",{parentName:"li"},"http://<system-host>:<system-port>"),". Don't include any specific path."),(0,i.kt)("li",{parentName:"ul"},"ProxyType: OnPremise"),(0,i.kt)("li",{parentName:"ul"},"Authentication: BasicAuthenication"),(0,i.kt)("li",{parentName:"ul"},"User and Password of some technical user with read-only permissions (you can also use a demo user at this stage).")),(0,i.kt)("p",{parentName:"li"},"In case you would like to define connectivity to SAP S/4HANA Cloud system, instead of SAP S/4HANA on-premise system, make sure to adjust the destination properties accordingly and follow-up this ",(0,i.kt)("a",{parentName:"p",href:"https://help.sap.com/docs/SAP_S4HANA_CLOUD/0f69f8fb28ac4bf48d2b57b9637e81fa/22bc724fd51a4aa4a4d1c5854db7e026.html"},"guide"),"."),(0,i.kt)("p",{parentName:"li"},"In this step we will use authentication to SAP S/4HANA using a technical user, as we will test the Material Availability service consuming this destination with no farther authentication. At later point - upon the productization and deployment of the Material Availability service, another authentication method for accessing SAP S/4HANA, such as principal propagation, can be considered.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Choose ",(0,i.kt)("strong",{parentName:"p"},"New Property")," and add the following additional properties, required for integration with SAP Business Application Studio:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"WebIDEEnabled: true"),(0,i.kt)("li",{parentName:"ul"},"HTML5.DynamicDestination: true"),(0,i.kt)("li",{parentName:"ul"},"WebIDEUsage: odata_abap,dev_abap\nFor more information see the ",(0,i.kt)("a",{parentName:"li",href:"https://help.sap.com/docs/bas/sap-business-application-studio/connecting-to-external-systems"},"Connecting to External Systems documentation")," of SAP Business Application Studio. "))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click on the ",(0,i.kt)("strong",{parentName:"p"},"Save")," button.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"For accessing on-premise systems you are also required to configure your ",(0,i.kt)("a",{parentName:"p",href:"https://help.sap.com/docs/connectivity/sap-btp-connectivity-cf/cloud-connector"},"Cloud Connector"),' with the endpoint URL defined in the SAP BTP destination. If you don\'t have any Cloud Connector to use, you can set up a Cloud Connector on your local machine/VM (which has access to your on-premise system endpoint). Make sure to configure the Cloud Connector with the SAP S/4HANA system endpoint for the appopriate SAP BTP subaccount, and to allow access for the system with path "/sap/opu/odata/" and all its sub-paths. '))),(0,i.kt)("h2",{id:"configure-the-material-availability-service-to-consume-external-services-through-destination"},"Configure the Material Availability service to consume external services through destination"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"From SAP Business Application Studio, open the ",(0,i.kt)("strong",{parentName:"p"},"package.json")," file from your project root folder.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"For each required service, add a new ",(0,i.kt)("strong",{parentName:"p"},"[","live","]")," profile with a ",(0,i.kt)("strong",{parentName:"p"},"credentials")," section, with the following properties:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'"destination"'),": defining the destination name from the SAP BTP subaccount to the SAP S/4HANA system."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'"path"'),": defining the path to the OData service within the SAP S/4HANA system."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Verify your changes using the following reference code:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"../../../package.json#L60-L65"},"Sales Order Service Sandbox Credentials")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"../../../package.json#L75-L80"},"Product Service Sandbox Credentials")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"../../../package.json#L90-L95"},"Availability Info Service Sandbox Credentials"))),(0,i.kt)("p",{parentName:"li"},"Make sure to replace the ",(0,i.kt)("inlineCode",{parentName:"p"},"<DESTINATION NAME>")," placeholder with the SAP S/4HANA system destination name."))),(0,i.kt)("h2",{id:"test-from-sap-business-application-studio"},"Test from SAP Business Application Studio"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open the ",(0,i.kt)("strong",{parentName:"p"},".env")," file from your project root folder, and add the following line to its content: "),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'destinations=[{"name":"<DESTINATION NAME>","url":"http://<DESTINATION NAME>.dest","proxyHost":"http://127.0.0.1","proxyPort":"8887"}]\n')),(0,i.kt)("p",{parentName:"li"},"Once again, make sure to replace the ",(0,i.kt)("inlineCode",{parentName:"p"},"<DESTINATION NAME>")," placeholder with the SAP S/4HANA system destination name. "),(0,i.kt)("p",{parentName:"li"},"This configuration allows access to the SAP BTP destination, when running your application locally from SAP Business Application Studio.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open the ",(0,i.kt)("strong",{parentName:"p"},".vscode/launch.json")," file from your project, and clone the first launch configuration.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'Rename the cloned configuration, for example to: "cds serve live data", and replace the "sandbox" argument with "live". See reference code ',(0,i.kt)("a",{parentName:"p",href:"../../../.vscode/launch.json#L24-L40"},"here"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open the ",(0,i.kt)("strong",{parentName:"p"},"Run and Debug")," perspective and start debugging using the launch configuration you created from the .vscode/launch.json file.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Once the application is running, press on the ",(0,i.kt)("strong",{parentName:"p"},"Open in a New Tab")," button from the notification. This will open a new browser tab for accessing the application process from the dev space localhost. You can also open this browser tab while the service is running from the Command Palette using the ",(0,i.kt)("strong",{parentName:"p"},"Ports: Preview")," command and selecting the 4004 port.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Test the service and UI application functionality, now consuming the live data. You can use similar queries and tests as you performed from the Basic scope. Only make sure to adjust the provided values to the data populated in the SAP S/4HANA system."))))}m.isMDXComponent=!0}}]);