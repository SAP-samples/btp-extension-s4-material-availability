<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-project-panel/advanced/deploy/README">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Deploy The Material Availability Service to SAP BTP, Cloud Foundry | Deliver Connected Experiences with a single view of Material Availability</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sap-samples.github.io/btp-extension-s4-material-availability/project-panel/advanced/deploy"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Deploy The Material Availability Service to SAP BTP, Cloud Foundry | Deliver Connected Experiences with a single view of Material Availability"><meta data-rh="true" name="description" content="In this section, you will deploy the Material Availability service from your CAP project to SAP BTP, Cloud Foundry."><meta data-rh="true" property="og:description" content="In this section, you will deploy the Material Availability service from your CAP project to SAP BTP, Cloud Foundry."><link data-rh="true" rel="icon" href="/btp-extension-s4-material-availability/img/code_blue.ico"><link data-rh="true" rel="canonical" href="https://sap-samples.github.io/btp-extension-s4-material-availability/project-panel/advanced/deploy"><link data-rh="true" rel="alternate" href="https://sap-samples.github.io/btp-extension-s4-material-availability/project-panel/advanced/deploy" hreflang="en"><link data-rh="true" rel="alternate" href="https://sap-samples.github.io/btp-extension-s4-material-availability/project-panel/advanced/deploy" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://NE6UOTSKCM-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Deliver Connected Experiences with a single view of Material Availability" href="/btp-extension-s4-material-availability/opensearch.xml">

<script src="js/custom.js" async></script><link rel="stylesheet" href="/btp-extension-s4-material-availability/assets/css/styles.e147d7e6.css">
<link rel="preload" href="/btp-extension-s4-material-availability/assets/js/runtime~main.f5b35e36.js" as="script">
<link rel="preload" href="/btp-extension-s4-material-availability/assets/js/main.a60bcf73.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_gu5v" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/btp-extension-s4-material-availability/"><div class="navbar__logo"><img src="/btp-extension-s4-material-availability/img/newspaper.png" alt="My Site Logo" class="themedImage_otCA themedImage--light_d4UA"><img src="/btp-extension-s4-material-availability/img/newspaper_neg.png" alt="My Site Logo" class="themedImage_otCA themedImage--dark_ePx5"></div><b class="navbar__title text--truncate">Deliver Connected Experiences with a single view of Material Availability</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SAP-samples/btp-extension-s4-material-availability" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_kWbt colorModeToggle_GwZs"><button class="clean-btn toggleButton_fOL9 toggleButtonDisabled_STpu" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_DCeJ"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_DFgp"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_UQT_"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_IbdI docsWrapper_HdE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_SdI4" type="button"></button><div class="docPage_cDO8"><aside class="theme-doc-sidebar-container docSidebarContainer_otbp"><div class="sidebarViewport_K3Wb"><div class="sidebar_oDHW"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_vPEQ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/btp-extension-s4-material-availability/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/btp-extension-s4-material-availability/category/project-panel">Project panel</a><button aria-label="Toggle the collapsible sidebar category &#x27;Project panel&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/discover">Discover</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/setup">Setup SAP Business Application Studio</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/btp-extension-s4-material-availability/category/basic-scope">Basic Scope</a><button aria-label="Toggle the collapsible sidebar category &#x27;Basic Scope&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/btp-extension-s4-material-availability/category/advanced-scope">Advanced Scope</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced Scope&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/advanced/introduction-advanced-scope">Introduction to the Advanced Scope</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/advanced/setup-s4hana-system">Integrate with SAP S/4HANA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/advanced/consume-live-data">Update Material Availability Service to Consume Live Data from SAP S/4HANA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/advanced/deploy">Deploy The Material Availability Service to SAP BTP, Cloud Foundry</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/outlook">Conclusion and Mission Outlook</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/btp-extension-s4-material-availability/support">Support</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_Cq4q"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_eHqP"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_BYXc"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_nDJs"><div class="docItemContainer_OGiL"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_k3Z9" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/btp-extension-s4-material-availability/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_JACu"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/btp-extension-s4-material-availability/category/project-panel"><span itemprop="name">Project panel</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/btp-extension-s4-material-availability/category/advanced-scope"><span itemprop="name">Advanced Scope</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Deploy The Material Availability Service to SAP BTP, Cloud Foundry</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_QCOD theme-doc-toc-mobile tocMobile_N0YI"><button type="button" class="clean-btn tocCollapsibleButton_pHwF">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Deploy The Material Availability Service to SAP BTP, Cloud Foundry</h1><p>In this section, you will deploy the Material Availability service from your CAP project to <a href="https://help.sap.com/docs/btp/sap-business-technology-platform/cloud-foundry-environment" target="_blank" rel="noopener noreferrer">SAP BTP, Cloud Foundry</a>. </p><p>This will expose your service, to provide an additional &quot;Vendor Available to Promise (ATP)&quot; capability (so others can also query the material availability status of your company as a vendor).</p><h2 class="anchor anchorWithStickyNavbar_FNw8" id="pre-requisites">Pre-requisites:<a href="#pre-requisites" class="hash-link" aria-label="Direct link to Pre-requisites:" title="Direct link to Pre-requisites:">​</a></h2><ul><li>You must have an SAP BTP subaccount with the Cloud Foundry environment enabled, and a Cloud Foundry space created in it.</li><li>You must have a user with Space Developer role which is a member of this Cloud Foundry space.</li><li>In case the Cloud Foundry space you would like to use is not under the SAP BTP subaccount which is subscribed to SAP Business Application Studio, make sure to copy the destination to SAP S/4HANA and configure connectivity to the Cloud Connector also from the SAP BTP subaccount hosting your Cloud Foundry space. </li></ul><h2 class="anchor anchorWithStickyNavbar_FNw8" id="prepare-your-project-for-production">Prepare your project for production:<a href="#prepare-your-project-for-production" class="hash-link" aria-label="Direct link to Prepare your project for production:" title="Direct link to Prepare your project for production:">​</a></h2><ol><li><p>Open Terminal in your project root context and execute <code>cds add xsuaa --for production</code>. This will configure your service for <a href="https://discovery-center.cloud.sap/serviceCatalog/authorization-and-trust-management-service?region=all" target="_blank" rel="noopener noreferrer">XSUAA-based authentication</a>.</p></li><li><p>From the Explorer view, open the <strong>package.json</strong> file. For each required OData service, clone the <code>&quot;[live]&quot;</code> profile including the service credentials, into a new <code>&quot;[production]&quot;</code> profile.
Final result should include:</p><div class="codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-text codeBlock_zHgq thin-scrollbar"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;cds&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;requires&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SalesOrderA2X&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;kind&quot;: &quot;odata-v2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;model&quot;: &quot;srv/external/SalesOrderA2X&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;[sandbox]&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;[live]&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;[production]&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       &quot;credentials&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;destination&quot;: &quot;&lt;DESTINATION NAME&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;path&quot;: &quot;/sap/opu/odata/sap/API_PRODUCT_SRV/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;ProductMasterA2X&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;kind&quot;: &quot;odata-v2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;model&quot;: &quot;srv/external/ProductMasterA2X&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;[sandbox]&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;[live]&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;[production]&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       &quot;credentials&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;destination&quot;: &quot;&lt;DESTINATION NAME&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;path&quot;: &quot;/sap/opu/odata/sap/API_PRODUCT_SRV/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;BasicProductAvailabilityInfo&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;kind&quot;: &quot;odata-v2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;model&quot;: &quot;srv/external/BasicProductAvailabilityInfo&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;[sandbox]&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;[live]&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;[production]&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       &quot;credentials&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;destination&quot;: &quot;&lt;DESTINATION NAME&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;path&quot;: &quot;/sap/opu/odata/sap/API_PRODUCT_AVAILY_INFO_BASIC/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   },</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Make sure to replace the <code>&lt;DESTINATION NAME&gt;</code> placeholder with the SAP BTP destination name as created in the previous section.</p></li><li><p>Make sure the <code>&quot;name&quot;</code> property in your package.json file includes only alphanumeric characters, &quot;_&quot; or &quot;-&quot;. This to ensure the module names and application&#x27;s xsappname that will be generated out of this name, will be valid in Cloud Foundry. For example, use the name: &quot;material-availability&quot;.</p></li><li><p>From the Terminal, execute <code>cds add approuter --for production</code> to enhance the application with App Router that will act as a single point-of-entry gateway to route the service requests to. In particular, it ensures user login and authentication in combination with XSUAA when accessing through browser.</p></li><li><p>Execute <code>npm update --package-lock-only</code> to freeze all dependencies, including transient ones. This is best practice for deployed applications.</p></li><li><p>Execute <code>cds add mta</code> to generate an mta.yaml descriptor file, configuring all the modules and services required for <a href="https://help.sap.com/docs/BTP/65de2977205c403bbc107264b8eccf4b/d04fc0e2ad894545aebfd7126384307c.html" target="_blank" rel="noopener noreferrer">MTA-based deployment</a> of your CAP project.</p></li><li><p>Right-click the generated <strong>mta.yaml</strong> file, select <strong>Open With...</strong> and then select the <strong>Text Editor</strong> option. After the <code>resources</code> section in the file, add the following resources to add the destination and connectivity SAP BTP service instances and make them accessible from the deployed application: </p><div class="codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-text codeBlock_zHgq thin-scrollbar"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: material-availability-destination</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type: org.cloudfoundry.managed-service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parameters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      service: destination</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      service-plan: lite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: material-availability-connectivity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type: org.cloudfoundry.managed-service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parameters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      service: connectivity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      service-plan: lite</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then add these resources as required from the service module (for example: material-availability-srv):</p><div class="codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-text codeBlock_zHgq thin-scrollbar"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">modules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: material-availability-srv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  . . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    requires:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: material-availability-auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: material-availability-destination</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: material-availability-connectivity</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Pay attention to indentation when editing the mta.yaml file.</p></li></ol><p>For more information on preparing CAP project for production, see <a href="https://cap.cloud.sap/docs/guides/deployment/to-cf#prepare-for-production" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Note: In this section, you will deploy only the service module in order to expose it as a Vendor API.
To deploy also the Material Dashboard Fiori application and setup its access to the service endpoint, see the <a href="https://developers.sap.com/tutorials/btp-app-work-zone-setup.html" target="_blank" rel="noopener noreferrer">end-to-end tutorial</a> for the necessary configurations in the mta.yaml file and on the Material Dashboard Fiori application.</p><h2 class="anchor anchorWithStickyNavbar_FNw8" id="deploy-to-cloud-foundry">Deploy to Cloud Foundry:<a href="#deploy-to-cloud-foundry" class="hash-link" aria-label="Direct link to Deploy to Cloud Foundry:" title="Direct link to Deploy to Cloud Foundry:">​</a></h2><ol><li>Assemble the required modules into one MTA archive file by right clicking the <strong>mta.yaml</strong> file from the Explorer view, and select <strong>Build MTA Project</strong> option. The MTA archive files are created under the mta_archives folder in your project.</li><li>Expand the <strong>mta_archives</strong> folder and right click the appropriate <code>.mtar</code> file for deployment. From the context menu, select the <strong>Deploy MTA Archive</strong> option.</li><li>Once prompted, sign-in to Cloud Foundry with your user credentials or by using SSO and select the Cloud Foundry organization and space to which you would like to deploy your application modules.</li><li>Wait for the <code>Process finished.</code> output from the Terminal opened to perform the deployment operation.</li><li>Go to SAP BTP cockpit and access the Cloud Foundry space to which you deployed the application modules. From the <strong>Applications</strong> tab click on the App Router application name, for example: material-availability, and click on the link under the <strong>Application Routes</strong>.</li><li>Login with the same user you logged-in to the SAP BTP Cockpit.</li><li>Test the deployed service by adding the paths as you did in the previous section, in step 8 of <a href="/btp-extension-s4-material-availability/3-basic/1-create-service#test-the-service-from-sap-business-application-studio">testing with the &quot;live&quot; profile</a> from SAP Business Application Studio.
Note: the access through the App router application module is required only when accessing through browser, to allow UI-based login. When accessing the service from any other application or service, the entrypoint of the deployed service application (for example, material-availability-srv) should be used directly, with JWT token credentials, initiated by SAP BTP XSUAA service.</li></ol><p>Congratulations! You have completed the <strong>Advanced</strong> scope and have your Material Availability Dashboard application ready, including UI, service logic and access to live SAP S/4HANA system. You also have the service available from Cloud Foundry as a downstream Vendor API. </p><p>See the <a href="/btp-extension-s4-material-availability/project-panel/outlook">Outlook</a> section for more post-deployment considerations, such as authentication and access by partners to your service and SAP S/4HANA system data.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/btp-extension-s4-material-availability/project-panel/advanced/consume-live-data"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Update Material Availability Service to Consume Live Data from SAP S/4HANA</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/btp-extension-s4-material-availability/project-panel/outlook"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Conclusion and Mission Outlook</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_IS5x thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pre-requisites" class="table-of-contents__link toc-highlight">Pre-requisites:</a></li><li><a href="#prepare-your-project-for-production" class="table-of-contents__link toc-highlight">Prepare your project for production:</a></li><li><a href="#deploy-to-cloud-foundry" class="table-of-contents__link toc-highlight">Deploy to Cloud Foundry:</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/btp-extension-s4-material-availability/">Overview</a></li></ul></div><div class="col footer__col"><div class="footer__title">SAP Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blogs.sap.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blogs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://answers.sap.com/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Q&amp;A<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discovery-center.cloud.sap/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discovery Center<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/SAP-samples/btp-extension-s4-material-availability" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Repo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/btp-extension-s4-material-availability/assets/js/runtime~main.f5b35e36.js"></script>
<script src="/btp-extension-s4-material-availability/assets/js/main.a60bcf73.js"></script>
</body>
</html>