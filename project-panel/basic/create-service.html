<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-project-panel/basic/create-service/README">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Create Material Availability CAP Service | Deliver Connected Experiences with a single view of Material Availability</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sap-samples.github.io/btp-extension-s4-material-availability/project-panel/basic/create-service"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Create Material Availability CAP Service | Deliver Connected Experiences with a single view of Material Availability"><meta data-rh="true" name="description" content="In this section, you will create a CAP project in SAP Business Application Studio, and implement a material availability service layer exposing and mashing up data from external SAP S/4HANA services."><meta data-rh="true" property="og:description" content="In this section, you will create a CAP project in SAP Business Application Studio, and implement a material availability service layer exposing and mashing up data from external SAP S/4HANA services."><link data-rh="true" rel="icon" href="/btp-extension-s4-material-availability/img/code_blue.ico"><link data-rh="true" rel="canonical" href="https://sap-samples.github.io/btp-extension-s4-material-availability/project-panel/basic/create-service"><link data-rh="true" rel="alternate" href="https://sap-samples.github.io/btp-extension-s4-material-availability/project-panel/basic/create-service" hreflang="en"><link data-rh="true" rel="alternate" href="https://sap-samples.github.io/btp-extension-s4-material-availability/project-panel/basic/create-service" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://NE6UOTSKCM-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Deliver Connected Experiences with a single view of Material Availability" href="/btp-extension-s4-material-availability/opensearch.xml">

<script src="js/custom.js" async></script><link rel="stylesheet" href="/btp-extension-s4-material-availability/assets/css/styles.e147d7e6.css">
<link rel="preload" href="/btp-extension-s4-material-availability/assets/js/runtime~main.f5b35e36.js" as="script">
<link rel="preload" href="/btp-extension-s4-material-availability/assets/js/main.a60bcf73.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_gu5v" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/btp-extension-s4-material-availability/"><div class="navbar__logo"><img src="/btp-extension-s4-material-availability/img/newspaper.png" alt="My Site Logo" class="themedImage_otCA themedImage--light_d4UA"><img src="/btp-extension-s4-material-availability/img/newspaper_neg.png" alt="My Site Logo" class="themedImage_otCA themedImage--dark_ePx5"></div><b class="navbar__title text--truncate">Deliver Connected Experiences with a single view of Material Availability</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SAP-samples/btp-extension-s4-material-availability" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_kWbt colorModeToggle_GwZs"><button class="clean-btn toggleButton_fOL9 toggleButtonDisabled_STpu" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_DCeJ"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_DFgp"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_UQT_"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_IbdI docsWrapper_HdE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_SdI4" type="button"></button><div class="docPage_cDO8"><aside class="theme-doc-sidebar-container docSidebarContainer_otbp"><div class="sidebarViewport_K3Wb"><div class="sidebar_oDHW"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_vPEQ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/btp-extension-s4-material-availability/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/btp-extension-s4-material-availability/category/project-panel">Project panel</a><button aria-label="Toggle the collapsible sidebar category &#x27;Project panel&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/discover">Discover</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/setup">Setup SAP Business Application Studio</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/btp-extension-s4-material-availability/category/basic-scope">Basic Scope</a><button aria-label="Toggle the collapsible sidebar category &#x27;Basic Scope&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/basic/introduction-basic-scope">Introduction to the Basic Scope</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/basic/create-service">Create Material Availability CAP Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/basic/create-ui-application">Create Material Dashboard UI Application</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/btp-extension-s4-material-availability/category/advanced-scope">Advanced Scope</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced Scope&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/btp-extension-s4-material-availability/project-panel/outlook">Conclusion and Mission Outlook</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/btp-extension-s4-material-availability/support">Support</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_Cq4q"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_eHqP"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_BYXc"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_nDJs"><div class="docItemContainer_OGiL"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_k3Z9" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/btp-extension-s4-material-availability/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_JACu"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/btp-extension-s4-material-availability/category/project-panel"><span itemprop="name">Project panel</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/btp-extension-s4-material-availability/category/basic-scope"><span itemprop="name">Basic Scope</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Create Material Availability CAP Service</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_QCOD theme-doc-toc-mobile tocMobile_N0YI"><button type="button" class="clean-btn tocCollapsibleButton_pHwF">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Create Material Availability CAP Service</h1><p>In this section, you will create a CAP project in SAP Business Application Studio, and implement a material availability service layer exposing and mashing up data from external SAP S/4HANA services.</p><h2 class="anchor anchorWithStickyNavbar_FNw8" id="create-a-cap-project">Create a CAP project<a href="#create-a-cap-project" class="hash-link" aria-label="Direct link to Create a CAP project" title="Direct link to Create a CAP project">​</a></h2><ol><li>Access SAP Business Application Studio from the SAP BTP cockpit under <strong>Subscriptions and Instances</strong> and create a new <strong>Full Stack Cloud Application</strong> dev space (or run an existing dev space of this type).</li><li>Once dev space is running, access it by clicking on its name.</li><li>From the dev space <strong>Get Started</strong> page, select the <strong>Start from template</strong> option and start creating a new CAP project.</li><li>Enter your CAP project name, for example: Material Availability, and keep the default Node.js runtime. Then click <strong>Finish</strong> to generate the project content in your workspace.</li></ol><h2 class="anchor anchorWithStickyNavbar_FNw8" id="import-external-sap-s4hana-service-data-models">Import external SAP S/4HANA Service Data Models<a href="#import-external-sap-s4hana-service-data-models" class="hash-link" aria-label="Direct link to Import external SAP S/4HANA Service Data Models" title="Direct link to Import external SAP S/4HANA Service Data Models">​</a></h2><p>In this step, you will consume the following SAP S/4HANA services to retrieve and calculate relevant information for the Material Dashboard application:</p><ul><li>Sales Order Service: <a href="https://api.sap.com/api/API_SALES_ORDER_SRV" target="_blank" rel="noopener noreferrer">https://api.sap.com/api/API_SALES_ORDER_SRV</a></li><li>Product Master Service: <a href="https://api.sap.com/api/API_PRODUCT_SRV" target="_blank" rel="noopener noreferrer">https://api.sap.com/api/API_PRODUCT_SRV</a></li><li>Basic Product Availability Info Service: <a href="https://api.sap.com/api/API_PRODUCT_AVAILY_INFO_BASIC" target="_blank" rel="noopener noreferrer">https://api.sap.com/api/API_PRODUCT_AVAILY_INFO_BASIC</a></li></ul><p>Before you can start consuming these external services from the Material Availability CAP Service, you must import the external service data models to your CAP project.
This can be done easily from SAP Business Application Studio using the <a href="https://help.sap.com/docs/bas/sap-business-application-studio/explore-services-using-service-center" target="_blank" rel="noopener noreferrer">Service Center</a>:</p><ol><li>Open the Service Center and expand the <strong>SAP BUSINESS ACCELERATOR HUB</strong> section.</li><li>Expand the <strong>SAP S/4HANA Cloud</strong> product and select the SAP S/4HANA Cloud package.</li><li>Select search on the <strong>SAP S/4HANA Cloud</strong> package and search for <strong>Sales Orders (A2X)</strong> service.</li><li>Login with your SAP Business Accelerator Hub credentials, once prompted.</li><li>An editor tab with the service information is opened. You can view the service properties, including the service entities and live data fetched from the SAP Business Accelerator Hub&#x27;s sandbox environment.</li><li>From the service tab, click on <strong>Service Actions</strong> and select <strong>Add External Data Model to CAP project</strong>. Select your CAP project from workspace and click <strong>Add</strong> to complete the operation.   </li></ol><p><img loading="lazy" alt="Service Center" src="/btp-extension-s4-material-availability/assets/images/service-center-8f89acbb800b002ee83ff1fe296939f2.png" width="1886" height="898" class="img_wQsy"></p><ol start="7"><li>Repeat steps 3-6 for services <strong>Product Master (A2X)</strong> and <strong>Basic Product Availability Info</strong>. </li><li>Open the <strong>Explorer</strong> to review the created resources in your project. For each service, a CDS model file is created under <strong>srv/external</strong> folder. In addition, the root <strong>package.json</strong> file is updated with required services information.</li></ol><h2 class="anchor anchorWithStickyNavbar_FNw8" id="configure-the-service-entrypoint-from-sandbox-environment">Configure the service entrypoint from sandbox environment<a href="#configure-the-service-entrypoint-from-sandbox-environment" class="hash-link" aria-label="Direct link to Configure the service entrypoint from sandbox environment" title="Direct link to Configure the service entrypoint from sandbox environment">​</a></h2><p>In the <strong>Basic Scope</strong> of the mission, you will use a sandbox environment to consume external SAP S/4HANA services. This will be used for development and testing purposes only, and not for production. </p><ol><li>Open the <strong>package.json</strong> file from your project root folder.</li><li>For each required service (that you imported in the previous steps), modify the profile name from <!-- -->[<!-- -->production<!-- -->]<!-- --> to <strong>[<!-- -->sandbox<!-- -->]</strong>. </li><li>Modify each required service <strong>credentials</strong> section to include only <strong>url</strong> property with the direct URL to the service from the sandbox environment. For production use, this would be implemented with <strong>destination</strong> and <strong>path</strong> properties instead. </li><li>Verify your changes using the following reference code:<ul><li><a href="/package.json#L55-L58">Sales Order Service Sandbox Credentials</a></li><li><a href="/package.json#L70-L73">Product Service Sandbox Credentials</a></li><li><a href="/package.json#L85-L88">Availability Info Service Sandbox Credentials</a></li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_FNw8" id="implement-the-service">Implement the service<a href="#implement-the-service" class="hash-link" aria-label="Direct link to Implement the service" title="Direct link to Implement the service">​</a></h2><ol><li>Open Terminal and run command <code>npm install @sap-cloud-sdk/http-client @sap-cloud-sdk/util</code> from your project root, to add dependencies required for consuming data from external services.</li><li>Trigger the <a href="https://help.sap.com/docs/bas/sap-business-application-studio/command-palette" target="_blank" rel="noopener noreferrer">Command Palette</a> by pressing F1 key and select the <strong>Open Storyboard</strong> command. The Storyboard editor serves as an entry point for viewing and adding components to your CAP project.</li><li>From Storyboard, select the &quot;+&quot; button under the <strong>Services</strong> column to add a new service resource to your CAP project.</li><li>Open the created <strong>srv/service.cds</strong> file from your project, and copy the content from the service model <a href="/srv/service.cds">here</a>. This service definition imports the external service models added in the previous step. Then it defines the Material Availability service model as a mashup service from the 3 external SAP S/4HANA services. It exposes only the required entities as projections from the external service entities, including only the relevant properties. The MaterialPlant entity definition includes calculated availability fields that will be populated at runtime, in addition to the properties from the imported A_ProductPlant entity. In this way, the MaterialPlant entity will mashup data retreived at runtime from 2 different SAP S/4HANA services.</li><li>Copy <a href="/srv/service.js">service.js</a> file including the service handlers implementation logic, into the <strong>srv</strong> folder in your project. The implementation in this file handles READ requests for all service entities defined in the model, also to support navigation between entities and other OData features such as the &quot;expand&quot; capability. The handlers for the MaterialPlant entity and for the Material entity (which may expand the MaterialPlant data using a navigation property) include special handling to fetch the required properties from the Product Master SAP S/4HANA service entities, and calculating availability properties by calling a function from the Basic Product Availability Info SAP S/4HANA service.</li><li>Go back to the Storyboard to view the created components in your project, and the connections between them. You can also open each service in the Graphical Modeler directly from the Storyboard to view the complete service structure, including the entity properties and the navigation relationships between the service entities.</li></ol><p><img loading="lazy" alt="Storyboard" src="/btp-extension-s4-material-availability/assets/images/storyboard-94f79199c63e54ecef140b9c995791c4.png" width="1920" height="961" class="img_wQsy"></p><h2 class="anchor anchorWithStickyNavbar_FNw8" id="test-the-service-from-sap-business-application-studio">Test the service from SAP Business Application Studio<a href="#test-the-service-from-sap-business-application-studio" class="hash-link" aria-label="Direct link to Test the service from SAP Business Application Studio" title="Direct link to Test the service from SAP Business Application Studio">​</a></h2><ol><li>Open Terminal and run command <code>npm i</code> from your project root to install dependencies.</li><li>Open the <strong>.vscode/launch.json</strong> file from your project, and add to the <strong>args</strong> list the <code>&quot;--profile&quot;, &quot;sandbox&quot;</code> arguments, to run the service using the credentials from the sandbox profile you created.</li><li>Create a <strong>.env</strong> file in your project root and add it the following content:<div class="codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-text codeBlock_zHgq thin-scrollbar"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">cds.requires.SalesOrderA2X.[sandbox].credentials.headers.APIKey=&lt;Copied API Key&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cds.requires.ProductMasterA2X.[sandbox].credentials.headers.APIKey=&lt;Copied API Key&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cds.requires.BasicProductAvailabilityInfo.[sandbox].credentials.headers.APIKey=&lt;Copied API Key&gt;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Access <a href="https://api.sap.com/" target="_blank" rel="noopener noreferrer">SAP Business Accelerator Hub</a>, login and open your user settings. Then from the API Settings press on the <strong>Show API Key</strong> button and then on <strong>Copy Key and Close</strong> option to copy your personal API key. This key serves as credentials for accessing the sanbox environment and must be provided as a header with each request sent to the sandbox services.</li><li>Back in SAP Business Application Studio, use the copied API key to replace the <code>&lt;Copied API Key&gt;</code> placeholders in the <strong>.env</strong> file content.</li><li>Open the <strong>Run and Debug</strong> view and start debugging using the launch configuration you created from the .vscode/launch.json file.</li><li>Once the service is running, press on the <strong>Open in a New Tab</strong> button from the notification. This will open a new browser tab for accessing the service process from the dev space localhost. You can also open this browser tab while the service is running from the Command Palette using the <strong>Ports: Preview</strong> command and selecting the 4004 port.</li></ol><p><img loading="lazy" alt="Run and Debug" src="/btp-extension-s4-material-availability/assets/images/run-e39fd6ecc58a4f884cf005a73c5e6d7d.png" width="1920" height="961" class="img_wQsy"></p><ol start="8"><li><p>Test your service functionality by adding the path options below to the service URL in the opened browser tab.
\
To debug the service runtime code, open the srv/service.js file and put a breakpoint in the relevant handler code lines.
\
Once completed your testing, press on the stop button from SAP Business Application Studio to terminate the debug session and the service process.</p><p><strong>Simple READ OData queries:</strong></p><ul><li>/material-availability/SalesOrder</li><li>/material-availability/SalesOrder?$filter=Material%20eq%20&#x27;TG11&#x27;</li><li>/material-availability/Material</li><li>/material-availability/Material?$top=50&amp;$filter=Material%20eq%20&#x27;FG126&#x27;</li><li>/material-availability/Material(&#x27;FG126&#x27;)</li><li>/material-availability/MaterialPlant(Material=&#x27;TG11&#x27;,Plant=&#x27;1010&#x27;)</li><li>/material-availability/MaterialPlant(Material=&#x27;E001&#x27;,Plant=&#x27;3010&#x27;)</li></ul><p>Note the calculated availability properties added when reading the MaterialPlant entity.</p><p>In case the availability information cannot be found for the specific material and plant, a 0 quantity and an &quot;N/A&quot; base unit will be returned. The Debug Console in SAP Business Application Studio will indicate an error of calling the underlined Basic Product Availability Info S/4HANA service for calculating the availability information.</p></li></ol><p>   <strong>OData queries including navigation or expantion of other entities:</strong></p><ul><li><p>/material-availability/Material?$expand=to_Description</p></li><li><p>/material-availability/Material(&#x27;TG11&#x27;)?$expand=to_Description,to_Plant</p></li><li><p>/material-availability/Material(&#x27;FG126&#x27;)/to_Description</p></li><li><p>/material-availability/Material(&#x27;FG126&#x27;)/to_Description?$filter=Language%20eq%20&#x27;EN&#x27;</p></li><li><p>/material-availability/Material(&#x27;TG11&#x27;)/to_Plant</p></li><li><p>/material-availability/Material(&#x27;D20_EPDM_SMRT_S&#x27;)/to_Plant?$expand=to_PlantMRPArea</p></li><li><p>/material-availability/MaterialPlant(Material=&#x27;D20_EPDM_SMRT_S&#x27;,Plant=&#x27;1010&#x27;)/to_PlantMRPArea</p><p><strong>OData queries for availability functions:</strong></p></li><li><p>/material-availability/calcMaterialAvailability(material=&#x27;TG11&#x27;,plant=&#x27;1010&#x27;)</p></li><li><p>/material-availability/calcMaterialAvailabilityAt(material=&#x27;TG11&#x27;,plant=&#x27;1010&#x27;,timestamp=2023-07-04T07:00:00Z)</p><p>Make sure to change timestamp with today&#x27;s date in order to get data, as the availability calculation cannot be performed for dates in the past.</p></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/btp-extension-s4-material-availability/project-panel/basic/introduction-basic-scope"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction to the Basic Scope</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/btp-extension-s4-material-availability/project-panel/basic/create-ui-application"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Create Material Dashboard UI Application</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_IS5x thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-a-cap-project" class="table-of-contents__link toc-highlight">Create a CAP project</a></li><li><a href="#import-external-sap-s4hana-service-data-models" class="table-of-contents__link toc-highlight">Import external SAP S/4HANA Service Data Models</a></li><li><a href="#configure-the-service-entrypoint-from-sandbox-environment" class="table-of-contents__link toc-highlight">Configure the service entrypoint from sandbox environment</a></li><li><a href="#implement-the-service" class="table-of-contents__link toc-highlight">Implement the service</a></li><li><a href="#test-the-service-from-sap-business-application-studio" class="table-of-contents__link toc-highlight">Test the service from SAP Business Application Studio</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/btp-extension-s4-material-availability/">Overview</a></li></ul></div><div class="col footer__col"><div class="footer__title">SAP Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blogs.sap.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blogs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://answers.sap.com/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Q&amp;A<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discovery-center.cloud.sap/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discovery Center<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/SAP-samples/btp-extension-s4-material-availability" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Repo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/btp-extension-s4-material-availability/assets/js/runtime~main.f5b35e36.js"></script>
<script src="/btp-extension-s4-material-availability/assets/js/main.a60bcf73.js"></script>
</body>
</html>